<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="StudyFlow - Inteligentny asystent studenta z transkrypcjƒÖ AI, fiszkami SRS i zarzƒÖdzaniem notatkami">
    <title>StudyFlow - Tw√≥j Inteligentny Asystent</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="./frontend/css/main.css">
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/idb@8.0.0/build/umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js"></script>
    
    <!-- PDF.js Library for PDF extraction -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        // Configure PDF.js worker
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        }
    </script>
</head>
<body>
    <div class="background-gradient"></div>
    
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">üìö</div>
                <span>StudyFlow</span>
            </div>
            <div class="user-info">
                <div class="avatar">U</div>
                <span id="username">Student</span>
            </div>
        </header>

        <nav>
            <button class="nav-btn active" data-tab="dashboard">üìä Dashboard</button>
            <button class="nav-btn" data-tab="flashcards">üé¥ Fiszki</button>
            <button class="nav-btn" data-tab="lectures">üìñ Wyk≈Çady</button>
            <button class="nav-btn" data-tab="new-lecture">‚ú® Nowy wyk≈Çad</button>
            <button class="nav-btn" data-tab="subjects">üìö Przedmioty</button>
            <button class="nav-btn" data-tab="schedule">üìÖ Plan zajƒôƒá</button>
            <button class="nav-btn" data-tab="settings">‚öôÔ∏è Ustawienia</button>
        </nav>

        <!-- Dashboard -->
        <div class="content active" id="dashboard">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="stat-flashcards">0</div>
                    <div class="stat-label">Fiszek opanowanych</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-subjects">0</div>
                    <div class="stat-label">Aktywnych przedmiot√≥w</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-accuracy">0%</div>
                    <div class="stat-label">≈örednia skuteczno≈õƒá</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-streak">0</div>
                    <div class="stat-label">Dni streak</div>
                </div>
            </div>

            <h2 style="margin-bottom: 20px; font-size: 22px;">Ostatnia aktywno≈õƒá</h2>
            <div class="grid" id="recent-activity">
                <!-- Dynamic content -->
            </div>
        </div>

        <!-- Flashcards -->
        <div class="content" id="flashcards">
            <div class="action-bar">
                <input type="text" class="search-box" id="flashcard-search" placeholder="üîç Szukaj fiszek...">
                <div style="display: flex; gap: 10px;">
                    <button class="btn" id="btn-collapse-all" 
                            style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1)); 
                                   border: 1px solid rgba(99, 102, 241, 0.3); 
                                   color: var(--primary); 
                                   padding: 10px 16px;" 
                            title="Zwi≈Ñ wszystkie sekcje">
                        ‚ñ≤ Zwi≈Ñ wszystko
                    </button>
                    <button class="btn" id="btn-expand-all" 
                            style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1)); 
                                   border: 1px solid rgba(99, 102, 241, 0.3); 
                                   color: var(--primary); 
                                   padding: 10px 16px;" 
                            title="Rozwi≈Ñ wszystkie sekcje">
                        ‚ñº Rozwi≈Ñ wszystko
                    </button>
                    <button class="btn btn-primary" id="btn-add-flashcard">+ Dodaj fiszkƒô</button>
                </div>
            </div>

            <h2 style="margin-bottom: 20px; font-size: 22px;">Twoje fiszki</h2>
            <div id="flashcards-grid">
                <!-- Dynamic flashcards -->
            </div>
        </div>

        <!-- Lectures -->
        <div class="content" id="lectures">
            <div class="action-bar">
                <input type="text" class="search-box" id="lecture-search" placeholder="üîç Szukaj wyk≈Çad√≥w...">
                <button class="btn btn-primary" id="btn-add-lecture">+ Dodaj wyk≈Çad</button>
            </div>

            <h2 style="margin-bottom: 20px; font-size: 22px;">Twoje wyk≈Çady</h2>
            <div id="lectures-list">
                <!-- Dynamic lectures -->
            </div>
        </div>

        <!-- Lecture View -->
        <div class="content" id="lecture-view">
            <div style="margin-bottom: 20px;">
                <button class="btn" id="btn-back-to-lectures" style="background: var(--bg-card);">
                    ‚Üê Powr√≥t do wyk≈Çad√≥w
                </button>
            </div>

            <div style="max-width: 1200px; margin: 0 auto;">
                <div style="margin-bottom: 30px;">
                    <h1 id="lecture-view-title" style="font-size: 32px; margin-bottom: 10px;">Tytu≈Ç wyk≈Çadu</h1>
                    <p id="lecture-view-meta" style="color: var(--text-secondary);">Przedmiot ‚Ä¢ Data</p>
                </div>

                <!-- Tabs -->
                <div style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid var(--bg-card); flex-wrap: wrap;">
                    <button class="tab-btn active" data-lecture-tab="notes">üìù Notatki</button>
                    <button class="tab-btn" data-lecture-tab="detailed">üìã Szczeg√≥≈Çowa</button>
                    <button class="tab-btn" data-lecture-tab="short">üìÑ Kr√≥tka</button>
                    <button class="tab-btn" data-lecture-tab="keypoints">üéØ Kluczowe</button>
                    <button class="tab-btn" data-lecture-tab="flashcards">üé¥ Fiszki</button>
                    <button class="tab-btn" data-lecture-tab="quiz">üìù Quiz</button>
                    <button class="tab-btn" data-lecture-tab="transcription">üìÑ Transkrypcja</button>
                </div>

                <!-- Tab Content: Notes -->
                <div class="lecture-tab-content active" id="lecture-tab-notes">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>Notatki z wyk≈Çadu</h3>
                            <button class="btn btn-primary" id="btn-generate-notes">
                                ‚ú® Generuj z AI
                            </button>
                        </div>
                        <div id="lecture-notes-content" style="min-height: 200px;">
                            <p style="color: var(--text-secondary); text-align: center; padding: 40px;">
                                Brak notatek. U≈ºyj przycisku "Generuj z AI" aby stworzyƒá notatki automatycznie.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Flashcards -->
                <div class="lecture-tab-content" id="lecture-tab-flashcards">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>Fiszki do nauki</h3>
                            <button class="btn btn-primary" id="btn-generate-flashcards">
                                ‚ú® Generuj z AI
                            </button>
                        </div>
                        <div id="lecture-flashcards-content" style="min-height: 200px;">
                            <p style="color: var(--text-secondary); text-align: center; padding: 40px;">
                                Brak fiszek. U≈ºyj przycisku "Generuj z AI" aby stworzyƒá fiszki automatycznie.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Detailed Note -->
                <div class="lecture-tab-content" id="lecture-tab-detailed">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>Szczeg√≥≈Çowa notatka</h3>
                            <button class="btn btn-primary" id="btn-generate-detailed">
                                ‚ú® Generuj z AI
                            </button>
                        </div>
                        <div id="lecture-detailed-content" class="markdown-content" style="min-height: 200px;">
                            <p style="color: var(--text-secondary); text-align: center; padding: 40px;">
                                Brak szczeg√≥≈Çowej notatki. U≈ºyj przycisku "Generuj z AI".
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Short Note -->
                <div class="lecture-tab-content" id="lecture-tab-short">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>Kr√≥tka notatka</h3>
                            <button class="btn btn-primary" id="btn-generate-short">
                                ‚ú® Generuj z AI
                            </button>
                        </div>
                        <div id="lecture-short-content" class="markdown-content" style="min-height: 200px;">
                            <p style="color: var(--text-secondary); text-align: center; padding: 40px;">
                                Brak kr√≥tkiej notatki. U≈ºyj przycisku "Generuj z AI".
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Key Points -->
                <div class="lecture-tab-content" id="lecture-tab-keypoints">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>Kluczowe punkty</h3>
                            <button class="btn btn-primary" id="btn-generate-keypoints">
                                ‚ú® Generuj z AI
                            </button>
                        </div>
                        <div id="lecture-keypoints-content" class="markdown-content" style="min-height: 200px;">
                            <p style="color: var(--text-secondary); text-align: center; padding: 40px;">
                                Brak kluczowych punkt√≥w. U≈ºyj przycisku "Generuj z AI".
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Quiz -->
                <div class="lecture-tab-content" id="lecture-tab-quiz">
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3>Quiz</h3>
                            <button class="btn btn-primary" id="btn-generate-quiz">
                                ‚ú® Generuj z AI
                            </button>
                        </div>
                        <div id="lecture-quiz-content" style="min-height: 200px;">
                            <p style="color: var(--text-secondary); text-align: center; padding: 40px;">
                                Brak quizu. U≈ºyj przycisku "Generuj z AI" aby stworzyƒá quiz automatycznie.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Transcription -->
                <div class="lecture-tab-content" id="lecture-tab-transcription">
                    <div class="card">
                        <h3 style="margin-bottom: 20px;">Transkrypcja nagrania</h3>
                        <div id="lecture-transcription-content" style="white-space: pre-wrap; font-family: monospace; background: var(--bg-dark); padding: 20px; border-radius: 8px; min-height: 200px;">
                            <p style="color: var(--text-secondary);">Brak transkrypcji</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- New Lecture -->
        <div class="content" id="new-lecture">
            <h2 style="margin-bottom: 30px; font-size: 28px;">‚ú® Utw√≥rz nowy wyk≈Çad</h2>
            
            <div class="card" style="max-width: 800px; margin: 0 auto;">
                <form id="new-lecture-form">
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Przedmiot</label>
                        <select id="lecture-subject" class="search-box" required style="width: 100%;">
                            <option value="">Wybierz przedmiot...</option>
                        </select>
                    </div>

                    <!-- Auto-generated title (shown after transcription) -->
                    <div id="lecture-title-section" style="margin-bottom: 20px; display: none;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                            ‚ú® Tytu≈Ç wyk≈Çadu (wygenerowany automatycznie)
                        </label>
                        <input type="text" id="lecture-title" class="search-box" 
                               placeholder="Tytu≈Ç zostanie wygenerowany po transkrypcji..." 
                               style="width: 100%;">
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">
                            Mo≈ºesz edytowaƒá tytu≈Ç przed zapisaniem
                        </p>
                    </div>

                    <!-- Wyb√≥r ≈∫r√≥d≈Ça materia≈Çu -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 12px; font-weight: 600;">üìö ≈πr√≥d≈Ço materia≈Çu</label>
                        <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                            <button type="button" class="btn source-selector active" data-source="audio" 
                                    style="flex: 1; background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(168, 85, 247, 0.2)); 
                                           border: 2px solid var(--primary); color: var(--primary);">
                                üé§ Nagranie audio
                            </button>
                            <button type="button" class="btn source-selector" data-source="document"
                                    style="flex: 1; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1)); 
                                           border: 1px solid rgba(99, 102, 241, 0.3); color: var(--primary);">
                                üìÑ Dokument (PDF/PPT)
                            </button>
                        </div>
                        <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 15px;">
                            üí° <strong>Wskaz√≥wka:</strong> Kliknij przycisk powy≈ºej, aby wybraƒá ≈∫r√≥d≈Ço materia≈Çu wyk≈Çadu
                        </p>
                        
                        <!-- Audio Section -->
                        <div id="audio-source-section" class="source-section">
                            <div style="display: flex; gap: 10px;">
                                <button type="button" class="btn btn-primary" id="btn-start-recording">
                                    üé§ Rozpocznij nagrywanie
                                </button>
                                <button type="button" class="btn" id="btn-upload-audio" 
                                        style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1)); 
                                               border: 1px solid rgba(99, 102, 241, 0.3); 
                                               color: var(--primary);">
                                    üìÅ Wgraj plik audio
                                </button>
                                <input type="file" id="audio-file-input" accept="audio/*" style="display: none;">
                            </div>
                            <div id="recording-status" style="margin-top: 10px; display: none;">
                                <span style="color: var(--accent);">‚óè Nagrywanie...</span>
                                <button type="button" class="btn" id="btn-stop-recording" style="background: var(--accent); color: white;">
                                    ‚èπ Zatrzymaj
                                </button>
                            </div>
                        </div>
                        
                        <!-- Document Section -->
                        <div id="document-source-section" class="source-section" style="display: none;">
                            <p style="font-size: 13px; color: var(--text-secondary); margin-bottom: 12px;">
                                üìÑ Wybierz plik PDF lub PowerPoint, aby wyekstrahowaƒá tre≈õƒá
                            </p>
                            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                <!-- Firefox-compatible file upload using labels -->
                                <label for="pdf-file-input" class="btn btn-primary" id="btn-upload-pdf-label"
                                       style="background: linear-gradient(135deg, #e74c3c, #c0392b); cursor: pointer; margin: 0;">
                                    üìï Wgraj PDF
                                </label>
                                <input type="file" id="pdf-file-input" accept=".pdf" style="display: none;">
                                
                                <label for="ppt-file-input" class="btn btn-primary" id="btn-upload-ppt-label"
                                       style="background: linear-gradient(135deg, #d35400, #e67e22); cursor: pointer; margin: 0;">
                                    üìä Wgraj PowerPoint
                                </label>
                                <input type="file" id="ppt-file-input" accept=".ppt,.pptx" style="display: none;">
                                
                                <!-- Legacy button approach (hidden, kept for compatibility) -->
                                <button type="button" class="btn btn-primary" id="btn-upload-pdf" 
                                        style="display: none; background: linear-gradient(135deg, #e74c3c, #c0392b);">
                                    üìï Wgraj PDF
                                </button>
                                <button type="button" class="btn btn-primary" id="btn-upload-ppt" 
                                        style="display: none; background: linear-gradient(135deg, #d35400, #e67e22);">
                                    üìä Wgraj PowerPoint
                                </button>
                                <input type="file" id="document-file-input" accept=".pdf,.ppt,.pptx" style="display: none;">
                            </div>
                            <div id="document-status" style="margin-top: 10px; display: none;">
                                <div style="padding: 12px; background: var(--bg-hover); border-radius: 8px; border-left: 4px solid var(--primary);">
                                    <p style="margin: 0; color: var(--primary); font-weight: 600;">
                                        <span id="document-file-name">üìÑ Plik wgrany</span>
                                    </p>
                                    <p style="margin: 4px 0 0 0; font-size: 12px; color: var(--text-secondary);">
                                        Przetwarzanie...
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: 20px;" id="transcription-section" style="display: none;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">
                            <span id="content-label">Transkrypcja</span>
                        </label>
                        <div id="transcription-progress" style="margin-bottom: 10px; display: none;">
                            <div class="progress-bar">
                                <div class="progress-fill" id="transcription-progress-bar" style="width: 0%"></div>
                            </div>
                            <p style="text-align: center; margin-top: 8px; color: var(--text-secondary);" id="progress-text">
                                Przetwarzanie...
                            </p>
                        </div>
                        <textarea id="lecture-transcription" class="search-box" rows="10" 
                                  placeholder="Tre≈õƒá pojawi siƒô tutaj..." 
                                  style="width: 100%; font-family: monospace;"></textarea>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Notatki</label>
                        <textarea id="lecture-notes" class="search-box" rows="6" 
                                  placeholder="Dodaj swoje notatki..." 
                                  style="width: 100%;"></textarea>
                    </div>

                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button type="button" class="btn" id="btn-cancel-lecture" 
                                style="background: var(--bg-card);">
                            Anuluj
                        </button>
                        <button type="submit" class="btn btn-primary">
                            üíæ Zapisz wyk≈Çad
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Subjects -->
        <div class="content" id="subjects">
            <div class="action-bar">
                <input type="text" class="search-box" id="subject-search" placeholder="üîç Szukaj przedmiot√≥w...">
                <button class="btn btn-primary" id="btn-add-subject">+ Dodaj przedmiot</button>
            </div>

            <h2 style="margin-bottom: 20px; font-size: 22px;">Twoje przedmioty</h2>
            <div class="grid" id="subjects-grid">
                <!-- Dynamic subjects -->
            </div>
        </div>

        <!-- Schedule -->
        <div class="content" id="schedule">
            <div class="action-bar">
                <button class="btn btn-primary" id="btn-add-schedule">+ Dodaj zajƒôcia</button>
            </div>

            <h2 style="margin-bottom: 20px; font-size: 22px;">üìÖ Plan zajƒôƒá</h2>
            
            <!-- Current time display -->
            <div id="current-time-display" style="
                background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(168, 85, 247, 0.1));
                border: 1px solid rgba(99, 102, 241, 0.3);
                border-radius: 12px;
                padding: 12px 20px;
                margin-bottom: 20px;
                text-align: center;
                font-weight: 600;
                color: var(--primary);
            ">
                <span id="current-date-time">≈Åadowanie...</span>
            </div>
            
            <div id="schedule-view" style="
                display: flex; 
                gap: 16px; 
                padding-bottom: 10px;
                min-height: 350px;
                justify-content: space-between;
                flex-wrap: nowrap;
            ">
                <!-- Dynamic schedule will be loaded here -->
            </div>
        </div>

        <!-- Settings -->
        <div class="content" id="settings">
            <h2 style="margin-bottom: 30px; font-size: 28px;">‚öôÔ∏è Ustawienia</h2>
            
            <div style="max-width: 800px; margin: 0 auto;">
                <!-- Whisper Settings -->
                <div class="card" style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 20px;">üé§ Transkrypcja (Whisper)</h3>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Model</label>
                        <select id="setting-whisper-model" class="search-box" style="width: 100%;">
                            <option value="tiny">Tiny (szybki, 75MB)</option>
                            <option value="base" selected>Base (optymalny, 142MB)</option>
                            <option value="small">Small (dok≈Çadny, 466MB)</option>
                        </select>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Jƒôzyk</label>
                        <select id="setting-whisper-language" class="search-box" style="width: 100%;">
                            <option value="pl">Polski</option>
                            <option value="en">Angielski</option>
                            <option value="auto">Auto-detect</option>
                        </select>
                    </div>

                    <div style="margin-bottom: 0;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Backend URL</label>
                        <input type="text" id="setting-backend-url" class="search-box" 
                               value="http://localhost:3001" style="width: 100%;">
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 8px; margin-bottom: 12px;">
                            ‚ö†Ô∏è <strong>Backend musi byƒá uruchomiony!</strong>
                        </p>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <button type="button" id="btn-check-backend" class="btn" 
                                    style="background: var(--primary); color: white;">
                                üîç Sprawd≈∫ backend
                            </button>
                            <span id="backend-status" style="font-size: 14px;"></span>
                        </div>
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 12px; padding: 12px; background: var(--bg-hover); border-radius: 8px;">
                            <strong>üìù Jak uruchomiƒá backend:</strong><br>
                            Otw√≥rz nowy terminal i wpisz: <code style="background: var(--bg-dark); padding: 2px 6px; border-radius: 4px; color: var(--primary);">npm run server</code>
                        </p>
                    </div>
                </div>

                <!-- GitHub Settings -->
                <div class="card" style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 20px;">üîÑ Synchronizacja GitHub</h3>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Repository (owner/repo)</label>
                        <input type="text" id="setting-github-repo" class="search-box" 
                               placeholder="np. username/my-notes" style="width: 100%;">
                    </div>

                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Personal Access Token</label>
                        <input type="password" id="setting-github-token" class="search-box" 
                               placeholder="ghp_..." style="width: 100%;">
                        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">
                            <a href="https://github.com/settings/tokens" target="_blank" style="color: var(--primary);">
                                Stw√≥rz token na GitHub ‚Üí
                            </a>
                        </p>
                    </div>

                    <div style="margin-bottom: 0;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Branch</label>
                        <input type="text" id="setting-github-branch" class="search-box" 
                               value="main" style="width: 100%;">
                    </div>
                </div>

                <!-- User Settings -->
                <div class="card" style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 20px;">üë§ Profil</h3>
                    
                    <div style="margin-bottom: 0;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Nazwa u≈ºytkownika</label>
                        <input type="text" id="setting-username" class="search-box" 
                               placeholder="Twoje imiƒô" style="width: 100%;">
                    </div>
                </div>

                <!-- Danger Zone -->
                <div class="card" style="margin-bottom: 20px; border: 2px solid var(--accent);">
                    <h3 style="margin-bottom: 15px; color: var(--accent);">‚ö†Ô∏è Strefa niebezpieczna</h3>
                    
                    <p style="color: var(--text-secondary); margin-bottom: 20px; font-size: 14px;">
                        Te operacje sƒÖ nieodwracalne i usuwajƒÖ wszystkie dane z aplikacji.
                    </p>
                    
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button type="button" class="btn" id="btn-clear-lectures" 
                                style="background: var(--accent)22; color: var(--accent); width: 100%; justify-content: center;">
                            üóëÔ∏è Usu≈Ñ wszystkie wyk≈Çady
                        </button>
                        
                        <button type="button" class="btn" id="btn-clear-flashcards" 
                                style="background: var(--accent)22; color: var(--accent); width: 100%; justify-content: center;">
                            üóëÔ∏è Usu≈Ñ wszystkie fiszki
                        </button>
                        
                        <button type="button" class="btn" id="btn-clear-schedule" 
                                style="background: var(--accent)22; color: var(--accent); width: 100%; justify-content: center;">
                            üóëÔ∏è Usu≈Ñ ca≈Çy plan zajƒôƒá
                        </button>
                        
                        <button type="button" class="btn" id="btn-clear-subjects" 
                                style="background: var(--accent)22; color: var(--accent); width: 100%; justify-content: center;">
                            üóëÔ∏è Usu≈Ñ wszystkie przedmioty
                        </button>
                        
                        <button type="button" class="btn" id="btn-clear-all-data" 
                                style="background: var(--accent); color: white; width: 100%; justify-content: center; font-weight: 700;">
                            ‚ö†Ô∏è USU≈É WSZYSTKIE DANE
                        </button>
                    </div>
                    
                    <p style="color: var(--text-secondary); margin-top: 15px; font-size: 12px; font-style: italic;">
                        üí° Wskaz√≥wka: Te funkcje sƒÖ przydatne podczas testowania aplikacji
                    </p>
                </div>

                <!-- Save Button -->
                <div style="display: flex; justify-content: flex-end;">
                    <button class="btn btn-primary" id="btn-save-settings">
                        üíæ Zapisz ustawienia
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    
    <!-- Add Subject Modal -->
    <div id="modal-add-subject" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;">üìö Dodaj nowy przedmiot</h3>
            <form id="form-add-subject">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Nazwa przedmiotu</label>
                    <input type="text" id="input-subject-name" class="search-box" required 
                           placeholder="np. Matematyka" style="width: 100%;" autofocus>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Kolor</label>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <!-- Pierwsza linia kolor√≥w -->
                        <button type="button" class="color-btn" data-color="#6366f1" style="background: #6366f1;" title="Indygo"></button>
                        <button type="button" class="color-btn" data-color="#8b5cf6" style="background: #8b5cf6;" title="Fioletowy"></button>
                        <button type="button" class="color-btn" data-color="#ec4899" style="background: #ec4899;" title="R√≥≈ºowy"></button>
                        <button type="button" class="color-btn" data-color="#10b981" style="background: #10b981;" title="Zielony"></button>
                        <button type="button" class="color-btn" data-color="#f59e0b" style="background: #f59e0b;" title="≈ª√≥≈Çty"></button>
                        <button type="button" class="color-btn active" data-color="#ef4444" style="background: #ef4444;" title="Czerwony"></button>
                        
                        <!-- Druga linia kolor√≥w -->
                        <button type="button" class="color-btn" data-color="#3b82f6" style="background: #3b82f6;" title="Niebieski"></button>
                        <button type="button" class="color-btn" data-color="#06b6d4" style="background: #06b6d4;" title="Turkusowy"></button>
                        <button type="button" class="color-btn" data-color="#84cc16" style="background: #84cc16;" title="Limonkowy"></button>
                        <button type="button" class="color-btn" data-color="#f97316" style="background: #f97316;" title="Pomara≈Ñczowy"></button>
                        <button type="button" class="color-btn" data-color="#a855f7" style="background: #a855f7;" title="Purpurowy"></button>
                        <button type="button" class="color-btn" data-color="#6b7280" style="background: #6b7280;" title="Szary"></button>
                        
                        <!-- Trzecia linia kolor√≥w -->
                        <button type="button" class="color-btn" data-color="#0ea5e9" style="background: #0ea5e9;" title="Jasny niebieski"></button>
                        <button type="button" class="color-btn" data-color="#14b8a6" style="background: #14b8a6;" title="Morski"></button>
                        <button type="button" class="color-btn" data-color="#65a30d" style="background: #65a30d;" title="Oliwkowy"></button>
                        <button type="button" class="color-btn" data-color="#dc2626" style="background: #dc2626;" title="Ciemny czerwony"></button>
                        <button type="button" class="color-btn" data-color="#7c3aed" style="background: #7c3aed;" title="Ciemny fioletowy"></button>
                        <button type="button" class="color-btn" data-color="#374151" style="background: #374151;" title="Ciemny szary"></button>
                    </div>
                    <input type="hidden" id="input-subject-color" value="#ef4444">
                </div>

                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" class="btn" onclick="closeModal('modal-add-subject')" 
                            style="background: var(--bg-card);">
                        Anuluj
                    </button>
                    <button type="submit" class="btn btn-primary">
                        ‚úÖ Dodaj przedmiot
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Flashcard Modal -->
    <div id="modal-add-flashcard" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;">üé¥ Dodaj nowƒÖ fiszkƒô</h3>
            <form id="form-add-flashcard">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Przednia strona (pytanie)</label>
                    <textarea id="input-flashcard-front" class="search-box" rows="3" required 
                              placeholder="np. Co to jest rekurencja?" 
                              style="width: 100%; resize: vertical;" autofocus></textarea>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Tylna strona (odpowied≈∫)</label>
                    <textarea id="input-flashcard-back" class="search-box" rows="3" required 
                              placeholder="np. Funkcja kt√≥ra wywo≈Çuje samƒÖ siebie..." 
                              style="width: 100%; resize: vertical;"></textarea>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Przedmiot</label>
                    <select id="input-flashcard-subject" class="search-box" required style="width: 100%;">
                        <option value="">Wybierz przedmiot...</option>
                    </select>
                </div>

                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" class="btn" onclick="closeModal('modal-add-flashcard')" 
                            style="background: var(--bg-card);">
                        Anuluj
                    </button>
                    <button type="submit" class="btn btn-primary">
                        ‚úÖ Dodaj fiszkƒô
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Schedule Event Modal -->
    <div id="modal-add-schedule" class="modal">
        <div class="modal-content">
            <h3 style="margin-bottom: 20px;">üìÖ Dodaj zajƒôcia do planu</h3>
            <form id="form-add-schedule">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Przedmiot</label>
                    <select id="input-schedule-subject" class="search-box" required style="width: 100%;">
                        <option value="">Wybierz przedmiot...</option>
                    </select>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Nazwa zajƒôƒá (opcjonalnie)</label>
                    <input type="text" id="input-schedule-title" class="search-box" 
                           placeholder="np. Wyk≈Çad, ƒÜwiczenia, Laboratorium..." style="width: 100%;">
                    <p style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">
                        Je≈õli puste, u≈ºyta zostanie nazwa przedmiotu
                    </p>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Dzie≈Ñ tygodnia</label>
                    <select id="input-schedule-day" class="search-box" required style="width: 100%;">
                        <option value="1">Poniedzia≈Çek</option>
                        <option value="2">Wtorek</option>
                        <option value="3">≈öroda</option>
                        <option value="4">Czwartek</option>
                        <option value="5">PiƒÖtek</option>
                        <option value="6">Sobota</option>
                        <option value="0">Niedziela</option>
                    </select>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Godzina rozpoczƒôcia</label>
                        <input type="time" id="input-schedule-start" class="search-box" required style="width: 100%;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600;">Godzina zako≈Ñczenia</label>
                        <input type="time" id="input-schedule-end" class="search-box" required style="width: 100%;">
                    </div>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Miejsce (opcjonalnie)</label>
                    <input type="text" id="input-schedule-location" class="search-box" 
                           placeholder="np. Sala A101, Budynek Informatyki..." style="width: 100%;">
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Typ zajƒôƒá</label>
                    <select id="input-schedule-type" class="search-box" style="width: 100%;">
                        <option value="lecture">Wyk≈Çad</option>
                        <option value="exercise">ƒÜwiczenia</option>
                        <option value="lab">Laboratorium</option>
                        <option value="seminar">Seminarium</option>
                        <option value="exam">Egzamin</option>
                        <option value="other">Inne</option>
                    </select>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Notatki (opcjonalnie)</label>
                    <textarea id="input-schedule-notes" class="search-box" rows="3" 
                              placeholder="Dodatkowe informacje..." 
                              style="width: 100%; resize: vertical;"></textarea>
                </div>

                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" class="btn" onclick="closeModal('modal-add-schedule')" 
                            style="background: var(--bg-card);">
                        Anuluj
                    </button>
                    <button type="submit" class="btn btn-primary">
                        ‚úÖ Dodaj do planu
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Main App Script -->
    <script type="module" src="./frontend/js/app.js?v=20251006-2002"></script>
</body>
</html>
